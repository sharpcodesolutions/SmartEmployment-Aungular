<div class="m-3 p-5 border-1 bg-white">
	<p>This is a more complete example with a service that simulates server calling:</p>

	<ul>
		<li>an observable async service to fetch a list of countries</li>
		<li>sorting, filtering and pagination</li>
		<li>simulated delay and loading indicator</li>
		<li>debouncing of search requests</li>
	</ul>

	<form>
		<div class="mb-3 row">
			<label for="table-complete-search" class="col-xs-3 col-sm-auto col-form-label">Full text search:</label>
			<div class="col-xs-3 col-sm-auto">
				<input
					id="table-complete-search"
					type="text"
					class="form-control"
					name="searchTerm"
					[(ngModel)]="employeeService.searchTerm"
				/>
			</div>
			<span class="col col-form-label" *ngIf="employeeService.loading$ | async">Loading...</span>
		</div>

		<table class="table table-striped">
			<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col" sortable="firstname" (sort)="onSort($event)">Employee</th>
					<th scope="col" sortable="lastname" (sort)="onSort($event)">Area</th>
					<th scope="col" sortable="employeeCode" (sort)="onSort($event)">Population</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let employee of employees$ | async">
					<th scope="row">{{ employee.id }}</th>
					<td>
						<ngb-highlight [result]="employee.firstname" [term]="employeeService.searchTerm"></ngb-highlight>
					</td>
					<td><ngb-highlight [result]="employee.lastname" [term]="employeeService.searchTerm"></ngb-highlight></td>
					<td><ngb-highlight [result]="employee.employeeCode" [term]="employeeService.searchTerm"></ngb-highlight></td>
				</tr>
			</tbody>
		</table>

		<div class="d-flex justify-content-between p-2">
			<ngb-pagination [collectionSize]="(total$ | async)!" [(page)]="employeeService.page" [pageSize]="employeeService.pageSize">
			</ngb-pagination>

			<select class="form-select" style="width: auto" name="pageSize" [(ngModel)]="employeeService.pageSize">
				<option [ngValue]="2">2 items per page</option>
				<option [ngValue]="4">4 items per page</option>
				<option [ngValue]="6">6 items per page</option>
			</select>
		</div>
	</form>
</div>